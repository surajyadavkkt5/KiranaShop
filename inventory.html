<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory Management - Fresh Kirana</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-content">
                <a href="index.html" class="logo">
                    <span class="logo-icon">🏪</span>
                    <span class="logo-text">Fresh Kirana</span>
                </a>
                <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <ul class="nav-links" id="navLinks">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="inventory.html" class="active">Inventory</a></li>
                    <li><a href="products.html">Products</a></li>
                    <li><a href="cart.html">Cart <span class="cart-count" id="cartCount">0</span></a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Password Protection Modal -->
    <div id="passwordModal" class="password-modal">
        <div class="password-modal-content">
            <h2>🔒 Only for shop owner</h2>
            <p>Enter your credentials to access inventory management</p>
            <input type="text" id="ownerIdInput" placeholder="Enter Owner ID" autocomplete="off">
            <input type="password" id="passwordInput" placeholder="Enter password" autocomplete="off">
            <div class="password-buttons">
                <button class="btn btn-primary" onclick="checkPassword()">Submit</button>
                <button class="btn btn-secondary" onclick="goBack()">Cancel</button>
            </div>
            <p id="passwordError" class="password-error"></p>
        </div>
    </div>

    <!-- Inventory Content (Hidden until authenticated) -->
    <div id="inventoryContent" style="display: none;">

    <!-- Inventory Header -->
    <section class="products-header">
        <div class="container">
            <h1>📦 Inventory Management</h1>
            <p style="margin-top: 10px; opacity: 0.9;">Track product availability and stock status</p>
        </div>
    </section>

    <!-- Inventory Stats -->
    <section class="inventory-stats-section">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">✅</div>
                    <div class="stat-info">
                        <div class="stat-number" id="availableCount">0</div>
                        <div class="stat-label">Available</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">⚠️</div>
                    <div class="stat-info">
                        <div class="stat-number" id="lowStockCount">0</div>
                        <div class="stat-label">Low Stock</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">❌</div>
                    <div class="stat-info">
                        <div class="stat-number" id="outOfStockCount">0</div>
                        <div class="stat-label">Out of Stock</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">📊</div>
                    <div class="stat-info">
                        <div class="stat-number" id="totalProducts">0</div>
                        <div class="stat-label">Total Products</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Category Filter -->
    <section class="category-filter">
        <div class="container">
            <div class="filter-buttons">
                <button class="filter-btn active" data-category="all">All Categories</button>
                <button class="filter-btn" data-category="Rice">🌾 Rice & Grains</button>
                <button class="filter-btn" data-category="Pulses">🫘 Pulses</button>
                <button class="filter-btn" data-category="Oil">🛢️ Oils</button>
                <button class="filter-btn" data-category="Snacks">🍪 Snacks</button>
                <button class="filter-btn" data-category="Beverages">🥤 Beverages</button>
                <button class="filter-btn" data-category="Household">🧹 Household</button>
                <button class="filter-btn" data-category="Books">📚 Books</button>
                <button class="filter-btn" data-category="Pens">✏️ Pens</button>
                <button class="filter-btn" data-category="Stationery">📑 Stationery</button>
            </div>
            <div class="inventory-filters">
                <button class="status-filter-btn active" data-status="all">All</button>
                <button class="status-filter-btn" data-status="available">Available</button>
                <button class="status-filter-btn" data-status="low">Low Stock</button>
                <button class="status-filter-btn" data-status="out">Out of Stock</button>
            </div>
        </div>
    </section>

    <!-- Inventory Table -->
    <section class="inventory-section">
        <div class="container">
            <div class="inventory-actions">
                <button class="btn btn-primary" onclick="openAddProductModal()">➕ Add New Product</button>
                <button class="btn btn-primary" onclick="markAllAvailable()">✓ Mark All Available</button>
                <button class="btn btn-outline" onclick="exportInventory()">📥 Export Report</button>
            </div>
            <div class="inventory-table-container">
                <table class="inventory-table" id="inventoryTable">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Category</th>
                            <th>Price</th>
                            <th>Stock Level</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="inventoryTableBody">
                        <!-- Inventory items will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- Add/Edit Product Modal -->
    <div id="productModal" class="product-modal" style="display: none;">
        <div class="product-modal-content">
            <h2 id="modalTitle">Add New Product</h2>
            <form id="productForm">
                <div class="form-group">
                    <label for="productName">Product Name *</label>
                    <input type="text" id="productName" required>
                </div>
                <div class="form-group">
                    <label for="productCategory">Category *</label>
                    <select id="productCategory" required>
                        <option value="Rice">🌾 Rice & Grains</option>
                        <option value="Pulses">🫘 Pulses</option>
                        <option value="Oil">🛢️ Oils</option>
                        <option value="Snacks">🍪 Snacks</option>
                        <option value="Beverages">🥤 Beverages</option>
                        <option value="Household">🧹 Household</option>
                        <option value="Books">📚 Books</option>
                        <option value="Pens">✏️ Pens</option>
                        <option value="Stationery">📑 Stationery</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="productPrice">Price (₹) *</label>
                    <input type="number" id="productPrice" min="0" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="productUnit">Unit *</label>
                    <input type="text" id="productUnit" placeholder="e.g., kg, L, piece" required>
                </div>
                <div class="form-group">
                    <label for="productIcon">Product Icon/Image *</label>
                    <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 10px;">
                        <div id="currentIconPreview" style="font-size: 3rem; padding: 10px; border: 2px dashed #ddd; border-radius: 8px; min-width: 80px; text-align: center; background: #f9f9f9;">📎</div>
                        <div style="flex: 1;">
                            <input type="text" id="productIcon" placeholder="Paste emoji or image URL" value="📎" required>
                            <small style="color: #666; display: block; margin-top: 5px;">Enter an emoji (e.g., 🌾) or paste an image URL</small>
                        </div>
                    </div>
                    <div style="margin-top: 10px;">
                        <label class="btn btn-outline" for="iconImageUpload" style="cursor: pointer; display: inline-block; margin: 0;">
                            📁 Choose Image File
                        </label>
                        <input type="file" id="iconImageUpload" accept="image/*" style="display: none;">
                        <small style="color: #666; display: block; margin-top: 5px;">Or upload an image from your device</small>
                    </div>
                </div>
                <div class="form-group">
                    <label for="productStock">Initial Stock Level</label>
                    <input type="number" id="productStock" min="0" value="100">
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="btn btn-primary">Save Product</button>
                    <button type="button" class="btn btn-secondary" onclick="closeProductModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-links">
                <a href="contact.html">Contact Us</a>
                <a href="privacy.html">Privacy Policy</a>
                <a href="terms.html">Terms & Conditions</a>
            </div>
            <p>&copy; 2025 Fresh Kirana. All rights reserved.</p>
            <p>Made with ❤️ for local communities</p>
        </div>
    </footer>
    </div>
    <!-- End Inventory Content -->

    <script src="script.js"></script>
</body>
</html>
